<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>PyScript - Python on website</title>
        <link rel="stylesheet" href="https://pyscript.net/releases/2025.11.2/core.css" />
        <script type="module" src="https://pyscript.net/releases/2025.11.2/core.js"></script>
    </head>
    <body>
        <a href="/index.html"> Back to homepage </a>
        <p>==========================================</p>
        <button onclick="__pip_install">Add PIP packages</button>
        <button onclick="__pip_clear">Delete PIP packages</button>
        <script type="py" terminal worker>
            import time, traceback, platform, sys
            __e_e__ = __import__("js.window").prompt
            from js.window import document as __e_a__
            from js.window import alert as __e_r__
            from js import encodeURIComponent as __val1__
            from js import decodeURIComponent as __val2__
            from pyscript import pyodide as __py__
            
            doc_s = __val1__(__e_a__.cookie)
            def __cook_in__(value):
                value = "*".join(value)
                if doc_s:
                    __e_a__.cookie = __val2__(f"data={value}; path=/; max-age={90 * 24 * 60 * 60}; SameSite=Lax")
                else: 
                    __e_a__.cookie = __val2__(f"data=[]; path=/; max-age={90 * 24 * 60 * 60}; SameSite=Lax")

            def __cook_fi__():
                if doc_s: 
                    spl = doc_s.split(";")
                    for a in spl:
                        a = a.strip()
                        if a.startswith("data="):
                            return a.split("*")
                    return False
                else: 
                    return False

            def _check_run():
                if not __cook_fi():
                    __cook_in([])
            
            def __pip_install(_): 
                install = __e_e__("Please enter pip package name: ")
                if install: 
                    cook = __cook_fi__()
                    if cook: 
                        __cook_in__(cook + [install])
                    else: 
                        __cook_in__([install])

            def __pip_clear(_):
                delete = _e_e_("Enter uninstall package name: ")
                if delete and __cook_fi() and delete in __cook_fi():
                    dat = []
                    for cooks in __cook_fi():
                        if cooks != delete: 
                            dat.append(cooks)
                    __cook_in(dat)
                elif not delete in __cook_fi():
                    __e_r__(f"Module {delete} isn't exists in pip installer")
            
            async def terminal():
                __py__.loadPackage("micropip")
                import micropip
                cook = __cook_fi__()
                if cook: 
                    pip = ", ".join(cook)
                    print(f"Packages installing: {pip}")
                    for cooks in cook:
                        print(f"Installing package {cooks}", end="\r")
                        await micropip.install(cooks)
                names = {} + globals() + locals()
                print("Opening terminal ...", end="\r")
                time.sleep(2.825)
                print(f"Python {sys.version} \n(Erkhemee Edition)")
                enter = ">>>"
                alls = []
                while 1:
                   try:
                      execute= await input(f"{enter} ")
                      if not ":" in execute and enter == ">>>": 
                         enter = ">>>"
                         exec(execute, names)
                      elif enter == "..." and not bool(execute):
                         exec("\n".join(alls), names)
                         alls=[]
                         enter = ">>>"
                      elif enter == "..." or execute.strip().endswith(":"):
                         enter = "..."
                         alls.append(execute)
                      else: 
                         enter = ">>>"
                   except SystemExit as code:
                      break
                   except Exception as e:
                     print("".join(traceback.format_exception(e)))
                     alls=[]
                     enter = ">>>"
                print(f"Exited terminal. {code}")
                print("Bye! ")
            
            print("Hello from Python (Pyodide)", platform.python_version())
            print("Program doesn't store your data, so don't worry!")
            print("Hint: Try entering @:/\\:@")
            name = await input("What is your name? ")
            if name != "@:/\\:@": 
                favs = ["Minecraft movie", "Chicken", "Strawberry", "Potato", "Geometry dash and Minecraft"]
                favr = ["Movie", "Food", "Fruit", "Vegetable", "Game"]
                for fav in favr: 
                     user = await input(f"{name}'s (Your) Favourite {fav}: ")
                print("My name is Erkhembayr")
                for a in [0, 1, 2, 3, 4]: 
                    print(f"Erkhembayr's (My) Favourite {favr[a]}: {favs[a]}")
                selector = await input("Do you want to open python terminal (yes/no): ")
                selector = selector.lower()
                if selector == "yes":
                    await terminal()
                else:
                    print("Bye! ")
                    time.sleep(5)
            else: 
                print("Secret: UNLOCKED! You entered @:/\\:@")
                await terminal()
        </script>
    </body>
</html>
